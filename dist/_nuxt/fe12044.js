(window.webpackJsonp=window.webpackJsonp||[]).push([[16,13],{578:function(e,t,n){"use strict";n.r(t);var r={components:{CubeShadow:n(595).a}},o=(n(587),n(35)),component=Object(o.a)(r,(function(){return(0,this._self._c)("CubeShadow",{staticClass:"mx-auto",attrs:{color:"#17a2b8"}})}),[],!1,null,"1b6dfe3d",null);t.default=component.exports},580:function(e,t,n){var content=n(588);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(64).default)("0e6929ba",content,!0,{sourceMap:!1})},587:function(e,t,n){"use strict";n(580)},588:function(e,t,n){var r=n(63)((function(i){return i[1]}));r.push([e.i,".spinner.spinner--cube-shadow[data-v-1b6dfe3d]{background-color:#17a2b8!important}",""]),r.locals={},e.exports=r},801:function(e,t,n){"use strict";n.r(t);n(1),n(94),n(307);var r=n(198),o={data:function(){return{deviceResponse:null,fingerprint:null,isInSavedDevice:!1,isInAsyncCall:!1}},computed:{deviceCheck:function(){return this.$store.state.device}},mounted:function(){this.visitorId(),this.getDevice()},methods:{getDevice:function(){var e=this,t=this;t.isInAsyncCall=!0,this.$axios.get("user-devices").then((function(n){(console.log(n),e.deviceResponse=n.data,n.data.devices)&&(null!=n.data.devices.find((function(e){return e.fingerprint==t.fingerprint}))?(t.isInSavedDevice=!0,t.$store.commit("device/addCurrentDevice")):t.isInSavedDevice=!1);n.data.hasOwnProperty("message")&&e.getmessage(n.data.message)})).catch((function(e){console.log(e),e.response.data.hasOwnProperty("message")&&this.getmessage(e.response.data.message),e.response.data.hasOwnProperty("errors")&&(this.serverErrors=Object.entries(e.response.data.errors))})).finally((function(){t.isInAsyncCall=!1}))},addDevice:function(){var e=this,t=this,data={fingerprint:t.fingerprint,platform:"web"};t.isInAsyncCall=!0,this.$axios.post("user-devices",data).then((function(n){console.log(n),"true"==n.data.status&&e.getDevice(),n.data.hasOwnProperty("message")&&t.getmessage(n.data.message)})).catch((function(e){console.log(e),e.response.data.hasOwnProperty("message")&&"DEVICE_ALREADY_ADDED"==e.response.data.message&&t.$store.commit("device/addCurrentDevice"),e.response.data.hasOwnProperty("message")&&t.getmessage(e.response.data.message),e.response.data.hasOwnProperty("errors")&&(this.serverErrors=Object.entries(e.response.data.errors))})).finally((function(){t.isInAsyncCall=!1}))},removeDevice:function(e){var t=this;if(confirm("Are you sure ?")){var n=this;n.isInAsyncCall=!0,this.$axios.delete("user-devices/".concat(e)).then((function(e){console.log(e),"true"==e.data.status&&(t.getDevice(),n.$store.commit("device/removeCurrentDevice")),e.data.hasOwnProperty("message")&&t.getmessage(e.data.message)})).catch((function(e){console.log(e),e.response.data.hasOwnProperty("message")&&this.getmessage(e.response.data.message),e.response.data.hasOwnProperty("errors")&&(this.serverErrors=Object.entries(e.response.data.errors))})).finally((function(){n.isInAsyncCall=!1}))}},addGuest:function(){this.$store.commit("device/addGuest")},removeGuest:function(){this.$store.commit("device/removeGuestDevice")},visitorId:function(){console.log("Visitor Id called");var e=localStorage.getItem("deviceId_alt");if(e)this.fingerprint=e;else{var t=(new r.ClientJS).getFingerprint();this.fingerprint=t,localStorage.removeItem("deviceId"),localStorage.setItem("deviceId_alt",t)}}}},c=n(35),component=Object(c.a)(o,(function(){var e=this,t=e._self._c;return t("div",[t("b-row",[t("b-alert",{staticClass:"w-100",attrs:{show:"",variant:"secondary"}},[e._v("\n      You can manage your regular devices from here.\n    ")]),e._v(" "),t("b-alert",{staticClass:"w-100",attrs:{show:e.deviceCheck.isGuest,variant:"danger"}},[e._v("You are using this device as guest. If you wish\n      to use this device\n      regularly then please add this device in the saved device list")]),e._v(" "),e.deviceResponse?t("h3",{staticClass:"text-center w-100"},[e._v("\n      Max allowed device: "+e._s(e.deviceResponse.max_allowed_device)+"\n    ")]):e._e(),e._v(" "),t("hr")],1),e._v(" "),e.isInAsyncCall?[t("b-row",{staticClass:"my-5"},[t("b-col",[t("loading")],1)],1)]:[t("b-row",[e.deviceResponse&&e.deviceResponse.devices.length>0?t("b-list-group",e._l(e.deviceResponse.devices,(function(n){return t("b-list-group-item",{key:n.id,staticClass:"my-3"},[t("b-badge",{attrs:{variant:"primary"}},[e._v(e._s(n.ip_address))]),e._v(" "),t("b-badge",{directives:[{name:"show",rawName:"v-show",value:n.fingerprint==e.fingerprint,expression:"device.fingerprint == fingerprint"}],attrs:{variant:"danger"}},[e._v("This device")]),e._v("\n          "+e._s(n.device)+" "),t("br"),e._v("\n\n          "+e._s(n.location)),t("br"),e._v("\n          Last updated: "+e._s(e.formatDateToString(n.updated_at))),t("br"),e._v(" "),t("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.removeDevice(n.id)}}},[e._v("Remove device")])],1)})),1):t("b-alert",{staticClass:"w-100 mx-auto text-center",attrs:{show:"",variant:"info"}},[e._v("No device registered")])],1),e._v(" "),e.isInSavedDevice?e._e():t("b-row",{staticClass:"my-3"},[t("b-button",{attrs:{disabled:e.isInAsyncCall,variant:"primary"},on:{click:e.addDevice}},[e._v("Add this device")])],1)],e._v(" "),t("b-row",{staticClass:"my-3"},[e.deviceCheck.isGuest||e.deviceCheck.hasCheckedDevice?e._e():t("b-button",{attrs:{variant:"primary"},on:{click:e.addGuest}},[e._v("Use as\n      guest")]),e._v(" "),e.deviceCheck.isGuest?t("b-button",{attrs:{variant:"danger"},on:{click:e.removeGuest}},[e._v("Remove as guest")]):e._e()],1)],2)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Loading:n(578).default})}}]);